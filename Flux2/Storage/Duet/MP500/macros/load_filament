; wait for filament
while sensors.filamentMonitors[0].status == "noFilament" && iterations < 20
	G4 P500
if sensors.filamentMonitors[0].status == "noFilament"
	M99
	
M104 S200
	
; load filament
G1 E50   F500
G1 E3950 F5000

; slow move till endstop
var distance = 0
while sensors.gpIn[3].value != 1 && iterations < 50
	G1 E5 F500
if sensors.gpIn[3].value != 1
	M99
	
M109 S200
G1 E200 F300
M104 S0