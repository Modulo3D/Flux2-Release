T0
M98 P"/macros/no_limits"

; goto probe position
G53 G1 X{283 + global.x_home_offset_0} Y{-30 + global.y_home_offset_0} F5000

; raise plate
G53 G1 Z0 F5000

; probe fast
M558 F500
G30 S-1

; drop the bed
G91
G1 Z5 F500 	
G90

; probe slow
M558 F100
G30 S-1

; set plate height
set global.z_bed_height = move.axes[2].machinePosition - sensors.probes[0].triggerHeight

; lower plate
G53 G1 Z0 F5000 

T-1